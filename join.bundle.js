(()=>{"use strict";function e(e){return(e||"").trim()}function o(e){return"string"!=typeof e||0===e.trim().length}function a(e){$("#error-message").text(e),$("#error-message").css("display","block")}window.onload=function(){$("#create-account-btn").on("click",(function(s){var n={};$("#email-form").serializeArray().forEach((function(o){var a=o.name,s=o.value;"Email"===a?n.email=e(s):"Username"===a?n.username=e(s):"Password"===a?n.password=s:"Confirm-password"===a&&(n.password2=s)})),console.log("form: %O",n),o(n.email)?a("Please fill out the email."):o(n.username)?a("Please fill out the username."):o(n.password)?a("Please set your password."):$.ajax({method:"POST",url:"".concat(apiHost,"/api/v1/users"),data:JSON.stringify(n),dataType:"json",contentType:"application/json",error:function(e){var o=e.responseJSON||{},s=o.code,n=o.what,r=o.min,t=(o.max,o.reason);console.log("failure response=%O",e.responseJSON),console.log("failure code="+s),"unauthorized"===s?a("Username does not exist or the credentials do not match."):"duplicate"===s?"email"===n?a("That email is already used."):"username"===n&&a("That username already exists."):a("invalid_username"===s?"too_short"===t?"Username must be at least ".concat(r," characters long."):"too_long"===t?"The username is too long.":"The username is invalid.":"invalid_email"===s?"That doesn't look like a valid email address.":"invalid_password"===s?"too_short"===t?"Password must be at least ".concat(r," characters long."):"too_long"===t?"The password is too long.":"The password is invalid.":"There was a problem while logging you in. code=".concat(s))}}).done((function(e){var o=e.token,a=e.user;console.log("login response: %O",e),localStorage.setItem("authToken",o),localStorage.setItem("user",JSON.stringify(a)),window.location.replace("welcome-to-muse.html")}))}))}})();